<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: reg-try.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: reg-try.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

/**
 * Функция настройки функционала регистрации.
 * @returns {void}
 */
function setupRegistrationFunctionality() {
  /**
   * @type {HTMLInputElement}
   * @description Поле ввода электронной почты на шаге 2.
   */
  const emailStep2Input = document.getElementById('emailStep2');

  /**
   * @type {HTMLElement}
   * @description Кнопка "Старт" на шаге 2.
   */
  const startButton = document.getElementById('buttonStep2');

  /**
   * @type {HTMLInputElement}
   * @description Поле ввода электронной почты на шаге 3.
   */
  const emailStep3Input = document.getElementById('emailStep3');

  /**
   * @type {HTMLInputElement}
   * @description Поле ввода пароля на шаге 3.
   */
  const passwordInput = document.getElementById('passwordStep3');

  /**
   * @type {HTMLElement}
   * @description Кнопка "Далее" на шаге 3.
   */
  const buttonStep3 = document.getElementById('buttonStep3');

  /**
   * @type {HTMLImageElement}
   * @description Изображение аватара.
   */
  const avatarImage = document.querySelector('.nav__avatar');

  /**
   * @type {HTMLElement}
   * @description Баннер для регистрации.
   */
  const banner = document.getElementById('banner-for-reg');

  /**
   * @type {HTMLElement}
   * @description Фильмы для регистрации.
   */
  const films = document.getElementById('films-for-reg');

  /**
   * @type {HTMLElement}
   * @description Блок регистрации.
   */
  const registration = document.getElementById('registration');

  /**
   * @type {HTMLElement}
   * @description Кнопка "Старт" на шаге 0.
   */
  const buttonStep0 = document.querySelector('.form__btn');

  /**
   * @type {NodeList}
   * @description Список ссылок в меню.
   */
  const menuLinks = document.querySelectorAll('.menu__link');

  /**
   * @type {HTMLElement|null}
   * @description Элемент сообщения об ошибке.
   */
  let errorMessage = null;

  /**
   * @type {boolean}
   * @description Флаг, указывающий на отображение ошибки.
   */
  let errorDisplayed = false;

  /**
   * Обработчик события клика на кнопку buttonStep0.
   * @param {Event} event - Событие клика.
   * @returns {void}
   */
  buttonStep0.addEventListener('click', function(event) {
    event.preventDefault();
    emailStep2Input.focus();
  });

  /**
   * Обработчик события клика на кнопку startButton.
   * @param {Event} event - Событие клика.
   * @returns {void}
   */
  startButton.addEventListener('click', function(event) {
    event.preventDefault();
    const email = emailStep2Input.value;
    if (isValidEmail(email)) {
      const regDiv = document.getElementById('reg');
      regDiv.style.display = 'none';
      const regDiv1 = document.getElementById('reg1');
      regDiv1.style.display = 'flex';
    }
  });

  /**
   * Обработчик события клика на кнопку buttonStep3.
   * @param {Event} event - Событие клика.
   * @returns {void}
   */
  buttonStep3.addEventListener('click', function(event) {
    event.preventDefault();
    const email = emailStep3Input.value;
    const password = passwordInput.value;

    if (isValidEmail(email) &amp;&amp; isValidPassword(password)) {
      sessionStorage.setItem('registrationCompleted', 'true');
      avatarImage.src = 'img/netflix-avatar.png';
      buttonStep0.style.display = 'none';
      registration.style.display = 'none';
      films.style.display = 'block';
      banner.style.display = 'block';
      const sliderElements = document.querySelectorAll('.slider__section');
      for (const sliderElement of sliderElements) {
        $(sliderElement).slick('slickSetOption', 'slidesToShow', 6, true);
      }
      removeErrorMessage();
      removeDisabledClass();
    } else {
      if (!errorDisplayed) {
        errorDisplayed = true;
        const errorMessage = document.createElement('p');
        errorMessage.classList.add('error-message');
        errorMessage.textContent = 'Пожалуйста, введите корректный адрес электронной почты и пароль (не менее 6 символов, содержит буквы и цифры).';

        buttonStep3.insertAdjacentElement('afterend', errorMessage);
      }
    }
  });

  /**
   * Переключает отображение регистрации в зависимости от выполнения регистрации.
   * @returns {void}
   */
  function toggleRegistration() {
    if (!registrationCompleted) {
      registration.style.display = 'flex';
      registration.style.opacity = '1';
      films.style.display = 'none';
      banner.style.display = 'none';
      addDisabledClass();
    } else {
      avatarImage.src = 'img/netflix-avatar.png';
      registration.style.display = 'none';
      films.style.display = 'block';
      banner.style.display = 'block';
      removeDisabledClass();
    }
  }

  toggleRegistration();

  /**
   * Удаляет сообщение об ошибке.
   * @returns {void}
   */
  function removeErrorMessage() {
    if (errorMessage) {
      errorMessage.remove();
      errorMessage = null;
      errorDisplayed = false;
    }
  }

  /**
   * Добавляет класс "disabled" для всех ссылок в меню.
   * @returns {void}
   */
  function addDisabledClass() {
    for (const link of menuLinks) {
      link.classList.add('disabled');
    }
  }

  /**
   * Удаляет класс "disabled" для всех ссылок в меню.
   * @returns {void}
   */
  function removeDisabledClass() {
    for (const link of menuLinks) {
      link.classList.remove('disabled');
    }
  }

  /**
   * Проверяет, является ли адрес электронной почты допустимым.
   * @param {string} email - Адрес электронной почты.
   * @returns {boolean} - Результат проверки.
   */
  function isValidEmail(email) {
    const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return regex.test(email);
  }

  /**
   * Проверяет, является ли пароль допустимым.
   * @param {string} password - Пароль.
   * @returns {boolean} - Результат проверки.
   */
  function isValidPassword(password) {
    const regex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/;
    return regex.test(password);
  }
}

/**
 * Функция инициализации функционала регистрации при загрузке страницы.
 * @returns {void}
 */
window.onload = function() {
  setupRegistrationFunctionality();

  /**
   * @type {boolean}
   * @description Флаг, указывающий на завершение регистрации.
   */
  const registrationCompleted = sessionStorage.getItem('registrationCompleted') === 'true';

  if (registrationCompleted) {
    const registrationElement = document.getElementById('registration');
    registrationElement.style.display = 'none';
    const buttonStep0 = document.querySelector('.form__btn');
    buttonStep0.style.display = 'none';
  }

  /**
   * @type {HTMLElement}
   * @description Ссылка homeLink.
   */
  const homeLink = document.getElementById('home-link');

  /**
   * @type {HTMLElement}
   * @description Блок регистрации.
   */
  const registration = document.getElementById('registration');

  /**
   * Обработчик события клика на ссылку homeLink.
   * @param {Event} event - Событие клика.
   * @returns {void}
   */
  homeLink.addEventListener('click', function(event) {
    event.preventDefault();
    registration.style.opacity = '0';
    setTimeout(function() {
      window.location.href = homeLink.href;
    }, 0); 
  });
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#setupRegistrationFunctionality">setupRegistrationFunctionality</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Jul 10 2023 21:45:17 GMT+0300 (Восточная Европа, летнее время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
